<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tampilan Cuaca Lengkap</title>
    <style>
    body {
        font-family: Arial, sans-serif;
        margin: 20px;
    }
    .container {
        border: 2px solid #333;
        padding: 20px;
        max-width: 400px;
    }
    .data-row {
        margin-bottom: 8px;
    }
    .label {
        font-weight: bold;
        display: inline-block;
        width: 150px;
    }
</style>
    </head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" 
integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" 
crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<div class="container">
    <div>
        <span class="label">Lokasi:</span>
        <input type="text" id="lokasiInput" value="Yogyakarta" placeholder="Masukkan Lokasi">
        <button id="getDataBtn">GET DATA</button>
    </div>
    
    <hr>
    
    <h3>Cuaca</h3>
    <div class="data-row">
        <span class="label">Suhu Celcius:</span> <span id="suhuCelcius">...</span> 	&deg;C
    </div>
    <div class="data-row">
        <span class="label">Suhu Fahrenheit:</span> <span id="suhuFahrenheit">...</span> &deg;F
    </div>
    <div class="data-row">
        <span class="label">Kelembapan:</span> <span id="kelembapan">...</span> %
    </div>
    
    <hr>
    
    <h3>Lokasi</h3>
    <div class="data-row">
        <span class="label">Negara:</span> <span id="negara">...</span>
    </div>
    <div class="data-row">
        <span class="label">Provinsi:</span> <span id="provinsi">...</span>
    </div>
    <div class="data-row">
        <span class="label">Kecamatan:</span> <span id="kota">...</span>
    </div>
    <div class="data-row">
        <span class="label">Longitude:</span> <span id="longitude">...</span>
    </div>
    <div class="data-row">
        <span class="label">Latitude:</span> <span id="latitude">...</span>
    </div>
    
</div>
<script>
    function fetchWeatherData() {
    const apiKey = "f457561a97c04ecc84665646250710";
    const locationQuery = $("#lokasiInput").val(); 
    const urlapi = `http://api.weatherapi.com/v1/current.json?key=${apiKey}&q=${locationQuery}&aqi=no`;

    $("#suhuCelcius").text("Memuat...");
    $("#negara").text("Memuat...");

    $.ajax({
        url: urlapi,
        method: "GET",
        success: function(data) {
            console.log(data);
            $("#suhuCelcius").text(data.current.temp_c);
            $("#suhuFahrenheit").text(data.current.temp_f);
            $("#kelembapan").text(data.current.humidity);

            $("#negara").text(data.location.country);
            $("#provinsi").text(data.location.region);
            $("#kota").text(data.location.name);
            $("#longitude").text(data.location.lon);
            $("#latitude").text(data.location.lat);

        },
        error: function(xhr, status, error) {
            console.error("Gagal mengambil data cuaca:", error);
            $("#suhuCelcius").text("ERROR");
            $("#negara").text("Data tidak ditemukan atau API bermasalah.");
            $("#provinsi").text("-");
            $("#kota").text("-");
            $("#longitude").text("-");
            $("#latitude").text("-");
            $("#suhuFahrenheit").text("-");
            $("#kelembapan").text("-");
        }
    });
}
$(document).ready(function() {
            fetchWeatherData();
        });

        $("#getDataBtn").click(function() {
            fetchWeatherData();
        });

        $("#lokasiInput").keypress(function(e) {
            if (e.which == 13) {
                fetchWeatherData();
            }
        });
</script>
    </body>
</html>